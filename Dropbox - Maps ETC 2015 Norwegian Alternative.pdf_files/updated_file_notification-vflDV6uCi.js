// Generated by CoffeeScript 1.10.0
define(['jquery', 'modules/core/i18n', 'modules/core/notify'], function($j, arg, Notify) {
  var NOTIFICATION_DURATION, UpdatedFileNotification, _;
  _ = arg._;
  NOTIFICATION_DURATION = 10;
  UpdatedFileNotification = (function() {
    function UpdatedFileNotification(refresh) {
      this.refresh = refresh;
      this._render();
    }

    UpdatedFileNotification.prototype.hide = function() {
      if (this._isShowing()) {
        Notify.clear();
      }
      return delete this._notification;
    };

    UpdatedFileNotification.prototype._render = function() {
      var $label, $msg, $refresh, $space;
      $label = $j('<span></span>').text(_('Someone edited this file.'));
      $space = $j('<span></span>').html('&nbsp;');
      $refresh = $j('<a/>').text(_('Refresh'));
      $refresh.on('click', this._hideAndRefresh.bind(this));
      $msg = $j('<span></span>').append($label).append($space).append($refresh);
      return this._notification = Notify.success($msg, NOTIFICATION_DURATION);
    };

    UpdatedFileNotification.prototype._isShowing = function() {
      return (this._notification != null) && Notify.isShown() && Notify.current() === this._notification;
    };

    UpdatedFileNotification.prototype._hideAndRefresh = function() {
      this.hide();
      return this.refresh();
    };

    return UpdatedFileNotification;

  })();
  return UpdatedFileNotification;
});

//# sourceMappingURL=updated_file_notification.js.map
