// Generated by CoffeeScript 1.10.0
define(['modules/clean/ajax', 'modules/clean/uuid'], function(ajax, uuid) {
  var FilePreviewLogger;
  FilePreviewLogger = (function() {
    FilePreviewLogger.PREVIEW_ATTEMPTED = 'preview_attempted';

    function FilePreviewLogger(initialFile) {
      this.fileViewerSessionId = uuid.v4();
      this.setFile(initialFile);
    }

    FilePreviewLogger.prototype.setFile = function(file) {
      this.currentFile = file;
      return this.currentFilePreviewSessionId = uuid.v4();
    };

    FilePreviewLogger.prototype.log = function(eventName) {
      var data;
      data = {
        event_name: eventName,
        file_viewer_session_id: this.fileViewerSessionId,
        file_preview_session_id: this.currentFilePreviewSessionId,
        file_ns_id: this.currentFile.ns_id,
        file_sjid: this.currentFile.sjid
      };
      return ajax.AuthenticatedRequest({
        url: '/log/file_preview',
        data: data
      });
    };

    return FilePreviewLogger;

  })();
  return FilePreviewLogger;
});

//# sourceMappingURL=file_preview_logger.js.map
