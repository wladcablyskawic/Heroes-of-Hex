<!DOCTYPE html>
<head>
    <title>Hex</title>
    <script src="hexagon.js"></script>
	<script src="events.js"></script>
</head>
<body>
	<canvas id="HexCanvas" width="1000" height="700"></canvas>
    <script>
        var hexagonGrid = new HexagonGrid("HexCanvas", 50);

		hexagonGrid.addObstacle(2,4,'blokada','nieprzebyte gory');
		hexagonGrid.addObstacle(2,3,'blokada','przepasc');
		hexagonGrid.addObstacle(3,4,'blokada','przepasc');		
		hexagonGrid.addObstacle(4,5,'blokada','nieprzebyte gory');

		hexagonGrid.addWarrior(0,0,'wojownik1',1,'opis wojownika1. cechy: szybkosc=1');
		hexagonGrid.addWarrior(0,2,'wojownik2',3, 'opis wojownika 2. cechy: szybkosc=3');
		hexagonGrid.addWarrior(0,4,'wojownik3',2,'opis wojownika 3. cechy: szybkosc=2');

		hexagonGrid.selectWarrior('wojownik2');
		
//        hexagonGrid.drawHexGrid(6, 8, 50, 50, true);
		
		window.onload = function(){
 var events = new Events("HexCanvas");
 var canvas = events.getCanvas();
 var context = events.getContext();
 var message = "";
 
 
 
 
 
 events.setStage(function() {
this.clear();
// draw blue triangle
         hexagonGrid.drawHexGrid(6, 8, 50, 50, true);

		   for(var i=0; i<WARRIORS.length; i++) {
 this.beginRegion();

			hexagonGrid.drawHexAtColRow(WARRIORS[i].Tile.column, WARRIORS[i].Tile.row,'blue', WARRIORS[i].name);
		 
		 this.addRegionEventListener("mousemove", function(){
			message = WARRIORS[i].hover;
		 });

		 this.addRegionEventListener("mouseout", function(){
			message = "";
		 });

		 this.closeRegion();
 }
 
 	for(var i=0; i<OBSTACLES.length; i++) {
	this.beginRegion();
		hexagonGrid.drawHexAtColRow(OBSTACLES[i].Tile.column, OBSTACLES[i].Tile.row,'red', OBSTACLES[i].name);
		 this.addRegionEventListener("mousemove", function(){
			message = OBSTACLES[i].hover;
		 });

		 this.addRegionEventListener("mouseout", function(){
			message = "";
		 });

		 this.closeRegion();
		
	}
	
	if(ACTIVE_WARRIOR != null) 
	{
		ACTIVE_WARRIOR.neighbours = getNeighbours(ACTIVE_WARRIOR.speed, ACTIVE_WARRIOR.Tile.column, ACTIVE_WARRIOR.Tile.row);
		for(neighbour of ACTIVE_WARRIOR.neighbours) {
		hexagonGrid.drawHexAtColRow(neighbour.column, neighbour.row, 'white', neighbour.getCoordinates());
		};
		hexagonGrid.highlightHex('red', ACTIVE_WARRIOR.Tile);
	}
	

	writeMessage(context, message);
 });

 // since we set the draw stage function, the listen()
 // method is automatically called for us

 function writeMessage(context, message){
 context.fillText(message, 10, 25);
 }

 };
		</script>

</body>
